<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Онлайн заказы</title>
  <style>
  /* Стили для контейнера */
  #container {
    max-width: 100%;
    padding: 10px;
    box-sizing: border-box;
  }

  /* Стили для категорий */
  .category {
    margin-bottom: 20px;
  }

  /* Стили для товаров */
  .product {
    display: flex;
    margin-bottom: 10px;
  }

  /* Стили для изображений товаров */
  .product img {
      max-width: 100px;
      max-height: 100px;
      margin-right: 10px;
    }

  /* Стили для деталей товаров */
  .product-details {
    flex-grow: 1;
    padding-left: 10px;
  }

  /* Стили для полей ввода количества */
  .quantity-input {
    display: flex;
    align-items: center;
  }

  .quantity-input button {
    width: 30px;
    height: 30px;
    font-size: 24px;
  }

  .quantity-input input {
    width: 60px;
    height: 18px;
    font-size: 24px;
    padding: 4px;
  }
  /* Стили для заказа и магазина */
  #coffee-shop,
  #order-button {
    width: 100%;
    max-width: 200px;
    margin-bottom: 10px;
  }

  #order-summary {
    white-space: pre-wrap;
  }

  /* Медиа-запрос для мобильных устройств */
  @media (max-width: 480px) {
    #container {
      padding: 5px;
    }

    .product {
      flex-direction: column;
    }

    .product img {
      width: auto;
      height: auto;
      max-width: 100px;
      max-height: 100px;
      margin-right: 10px;
    }

    .product-details {
      padding-left: 0;
    }
  }
</style>

</head>
<div id="container">
<body>
  <h1>Заказы Coffee Like</h1>

  <div class="form-group">
    <label for="coffee-shop">Для какой кофейни делаем заказ:</label>
    <select id="coffee-shop" required>
      <option value="" disabled selected>Выберите кофейню</option>
      <option value="В Охта Молл на подземную зону разгрузки:">Охта Молл, 3 этаж</option>
      <option value="На парковку со стороны ул. Магнитогорской:">Фудтрак</option>
    </select>
  </div>

  <div id="products">
    <!-- Здесь будут отображаться товары -->
  </div>

  <div id="order-summary"></div>

  <button onclick="makeOrder()">Сделать заказ</button>

  <div id="order-result"></div>
  <button onclick="copyOrderToClipboard()">Скопировать заказ</button>


  <script>
    // Данные о товарах
    var productsData = [
      {
        category: "Вода и молоко",
        items: [
          {
            name: "Молоко Кружева 3,2%",
            description: "Заказывать кратно 12 л (48, 60, 72 и т.д.)",
            image: "pictures/milk.jpg",
            quantity: 5,
            unit: "л"
          },
          {
            name: "Вода святой источник 0,5л негаз",
            description: "Заказывать кратно 12 шт (12, 24 и т.д.)",
            image: "pictures/saint05still.jpg",
            quantity: 5,
            unit: "шт"
          },
          {
            name: "Вода святой источник 0,5л газ",
            description: "Заказывать кратно 12 шт (12, 24 и т.д.)",
            image: "pictures/saint05sparkling.jpg",
            quantity: 5,
            unit: "шт"
          },
          {
            name: "Вода святой источник 1,5л газ",
            description: "Заказывать кратно 6 шт (6, 12 и т.д.)",
            image: "pictures/saint15sparkling.jpg",
            quantity: 5,
            unit: "шт"
          },
          {
            name: "Тоник Evervess",
            description: "Освежающий тоник Evervess, 1 литр.",
            image: "pictures/tonic.jpg",
            quantity: 15,
            unit: "л"
          }
        ]
      },
      {
        category: "Альтернативное молоко",
        items: [
          {
            name: "Альпро Кокос",
            description: "Кокосовое молоко Alpro, 1 литр.",
            image: "pictures/coconut-milk.jpg",
            quantity: 12,
            unit: "л"
          },
          {
            name: "Альпро Банан",
            description: "Банановое молоко Alpro, 1 литр.",
            image: "pictures/banana-milk.jpg",
            quantity: 7,
            unit: "л"
          },
          {
            name: "Альпро Миндаль",
            description: "Миндальное молоко Alpro, 1 литр.",
            image: "pictures/almond-milk.jpg",
            quantity: 10,
            unit: "л"
          },
          {
            name: "Альпро Фундук",
            description: "Миндальное молоко Alpro, 1 литр.",
            image: "pictures/hazelnut-milk.jpg",
            quantity: 10,
            unit: "л"
          }
        ]
      },
      {
        category: "Мороженое без ЗМЖ",
        items: [
          {
            name: "Мороженое без ЗМЖ",
            description: "Вкусное мороженое без сметаны, 1 порция.",
            image: "pictures/ice-cream.jpg",
            quantity: 8,
            unit: "ванночка"
          }
        ]
      },
      {
        category: "Расходники",
        items: [
          {
            name: "Салфетки бумажные",
            description: "Пакет вилок для кофейни, 100 шт.",
            image: "pictures/napkins.jpg",
            quantity: 20,
            unit: "упак"
          },
          {
            name: "Вилки",
            description: "Пакет вилок для кофейни, 100 шт.",
            image: "pictures/forks.jpg",
            quantity: 20,
            unit: "упак"
          },
          {
            name: "Палочки для мешалок",
            description: "Пакет палочек для мешалок, 500 шт.",
            image: "pictures/stirrers.jpg",
            quantity: 30,
            unit: "упак"
          },
          {
            name: "Трубочки",
            description: "Пакет трубочек, 200 шт.",
            image: "pictures/straws.jpg",
            quantity: 25,
            unit: "упак"
          },
          {
            name: "Пакетики для льда",
            description: "Пакет вилок для кофейни, 100 шт.",
            image: "pictures/icebags.jpg",
            quantity: 20,
            unit: "упак"
          }
        ]
      }
    ];

    // Функция для отображения товаров
    function displayProducts() {
      var productsContainer = document.getElementById("products");

      productsData.forEach(function(category) {
        var categoryElement = document.createElement("div");
        categoryElement.classList.add("category");

        var categoryTitle = document.createElement("h2");
        categoryTitle.classList.add("category-title");
        categoryTitle.innerText = category.category;
        categoryElement.appendChild(categoryTitle);

        var categoryContent = document.createElement("div");
        categoryContent.classList.add("category-content");

        category.items.forEach(function(item) {
          var productElement = document.createElement("div");
          productElement.classList.add("product");

          var imageElement = document.createElement("img");
          imageElement.src = item.image;
          productElement.appendChild(imageElement);

          var detailsElement = document.createElement("div");
          detailsElement.classList.add("product-details");

          var nameElement = document.createElement("div");
          nameElement.classList.add("product-name");
          nameElement.innerText = item.name;
          nameElement.style.fontWeight = "bold";
          detailsElement.appendChild(nameElement);

          var descriptionElement = document.createElement("div");
          descriptionElement.innerText = item.description;
          detailsElement.appendChild(descriptionElement);

          var quantityElement = document.createElement("div");
          quantityElement.innerText = "Количество: ";

          var quantityInput = document.createElement("input");
          quantityInput.type = "number";
          quantityInput.value = item.quantity;
          quantityInput.min = "0";

          var decreaseButton = document.createElement("button");
          decreaseButton.innerText = "-";
          decreaseButton.style.padding = "2px 5px";
          decreaseButton.addEventListener("click", function() {
            var currentValue = parseInt(quantityInput.value);
            if (currentValue > 0) {
              quantityInput.value = currentValue - 1;
            }
          });

          var increaseButton = document.createElement("button");
          increaseButton.innerText = "+";
          increaseButton.style.padding = "2px 5px";
          increaseButton.addEventListener("click", function() {
            var currentValue = parseInt(quantityInput.value);
            quantityInput.value = currentValue + 1;
          });

          var quantityInputGroup = document.createElement("div");
          quantityInputGroup.classList.add("quantity-input");
          quantityInputGroup.appendChild(decreaseButton);
          quantityInputGroup.appendChild(quantityInput);
          quantityInputGroup.appendChild(increaseButton);

          quantityElement.appendChild(quantityInputGroup);
          detailsElement.appendChild(quantityElement);

          // var unitElement = document.createElement("div");
          // unitElement.innerText = "Единица измерения: " + item.unit;
          // detailsElement.appendChild(unitElement);

          productElement.appendChild(detailsElement);
          categoryContent.appendChild(productElement);
        });

        categoryElement.appendChild(categoryContent);
        productsContainer.appendChild(categoryElement);
      });
    }

    // Функция для создания заказа
    function makeOrder() {
      var coffeeShopSelect = document.getElementById("coffee-shop");
      var selectedCoffeeShop = coffeeShopSelect.value;

      if (selectedCoffeeShop === "") {
        alert("Пожалуйста, выберите кофейню.");
        return;
      }

      var orderSummary = document.getElementById("order-summary");
      orderSummary.innerHTML = ""; // Очистка предыдущего заказа

      var selectedProducts = [];
      var productElements = document.getElementsByClassName("product");

      Array.from(productElements).forEach(function(productElement) {
        var nameElement = productElement.getElementsByClassName("product-name")[0];
        var quantityInput = productElement.getElementsByTagName("input")[0];

        var productName = nameElement.innerText;
        var quantity = parseInt(quantityInput.value);

        if (quantity > 0) {
          selectedProducts.push({ name: productName, quantity: quantity });
        }
      });

      if (selectedProducts.length === 0) {
        orderSummary.innerText = "Ваш заказ пуст.";
      } else {
        var summaryText = selectedCoffeeShop + "\n\n";

        selectedProducts.forEach(function(product) {
          summaryText += product.name + " - " + product.quantity + " " + getProductUnit(product.name) + "\n";
        });

        orderSummary.innerText = summaryText;
      }
    }

    // Функция для копирования заказа

    function copyOrderToClipboard() {
    var orderSummary = document.getElementById("order-summary").innerText;
      navigator.clipboard.writeText(orderSummary).then(function() {
        alert("Заказ скопирован в буфер обмена.");
      }, function() {
        alert("Не удалось скопировать заказ.");
      });
     }






    // Вспомогательная функция для получения единицы измерения товара
    function getProductUnit(productName) {
      var unit = "";

      productsData.forEach(function(category) {
        category.items.forEach(function(item) {
          if (item.name === productName) {
            unit = item.unit;
          }
        });
      });

      return unit;
    }

    // Вызов функции для отображения товаров при загрузке страницы
    displayProducts();
  </script>
</body>
</div>
</html>
